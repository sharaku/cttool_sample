config:
  env:
    - env_A=0
    - env_B=1
  junit:
    allowEmptyResults: true
    keepLongStdio: true
    testResults: 'result/*.xml'
  archiveArtifacts:
    artifacts: 'result/*'

stages:
 - job1
 - job2
 - para_job1

stage:
  job1:
    node: master
    script:
     - sh: echo "job1 env_A=${env_A} env_C=${env_C} env_D=${env_D}"
     - sh: ls -al
     - sh: pwd
     - sh: sh ./mkresult result/junit1.xml
     - echo: "echo job1"
    env:
     - env_C="C"
     - env_D="D"
    result: 'result/*.xml'

  job2:
    node: master
    script:
     - sh: echo "job2"
     - sh: ls -al
     - sh: pwd
     - sh: sh ./mkresult result/junit2.xml
     - sh: echo "job2 env_C=${env_C} env_D=${env_D}"
    result: 'result/*.xml'

  job3:
    subproject: testset/sample

  para_job1:
    parallel:
     - job1
     - job2
     - job3

  para_job2:
    parallel:
     - para_job1
     - para_job1
